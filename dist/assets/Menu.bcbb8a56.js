import{g as M,r as s,b as u,j as l,k as T,a,h as n,i as b,C as N}from"./index.65bb9303.js";import{T as j,P as F,M as d}from"./Toolbar.f8df97e7.js";function G(){var w,k,_;const{pathname:v}=M(),x={name:"",url:"",icon:""},[i,p]=s.exports.useState(x),[o,r]=s.exports.useState([]),[t,h]=s.exports.useState(),[I,C]=s.exports.useState(!1),y=()=>{C(!0)},m=()=>{C(!1),p(x),h()};s.exports.useEffect(()=>{u.get("/menu").then(e=>r(e.data.data)).catch(e=>console.log(e.message))},[]);const g=e=>{h();const{value:c,name:f}=e.target;p({...i,[f]:c})},S=async e=>{await u.delete(`/menu/${e}`).then(c=>{c.status===200&&r(o.filter(f=>f._id!==e))}).catch(c=>console.log(c))},L=async()=>{i._id&&await u.put(`/menu/${i._id}`,i).then(e=>{console.log(e.data),e.status===200?(r(o.map(c=>c._id===i._id?e.data.data:c)),m()):e.status===201&&h(e.data.data)}).catch(e=>console.log(e)),await u.post("/menu",i).then(e=>{console.log(e.data),e.status===200?(r(o.concat(e.data.data)),m()):e.status===201&&h(e.data.data)}).catch(e=>console.log(e.message))};return l(T,{children:[l(j,{children:[a("div",{className:"text-capitalize float-start",children:F(v)}),a("div",{className:"float-end",children:a("button",{onClick:y,className:"btn btn-primary btn-sm",children:"Add"})})]}),l("div",{className:"card",children:[l("table",{className:"table",children:[a("thead",{className:"text-muted",children:l("tr",{children:[a("th",{children:"#"}),a("th",{children:"No"}),a("th",{children:"Todo"}),a("th",{children:"Is Complete"}),a("th",{className:"text-end",children:"Action"})]})}),a("tbody",{className:"text-muted",children:o.map((e,c)=>l("tr",{children:[a("td",{children:l("div",{className:"popup",children:[a("span",{children:"Hover"}),l("div",{className:"popup-content",children:[a("div",{"data-link-hover":"true",onClick:()=>{p({...i,_id:e._id,name:e.name,url:e.url,icon:e.icon}),y()},children:"edit"}),a("div",{"data-link-hover":"true",onClick:()=>S(e._id),children:"delete"})]})]})}),a("td",{children:c+1}),a("td",{children:e.name}),a("td",{})]},e._id))})]}),l(d,{show:I,onHide:m,size:"lg",children:[l(d.Header,{children:[a(d.Title,{className:"text-capitalize",children:F(v)}),a("div",{className:"btn btn-icon btn-sm btn-light-primary text-primary",onClick:m,children:l("svg",{width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a("rect",{id:"time-3-icon",opacity:"0.5",x:"6",y:"17.3137",width:"16",height:"2",rx:"1",transform:"rotate(-45 6 17.3137)",fill:"black"}),a("rect",{id:"time-3-icon",x:"7.41422",y:"6",width:"16",height:"2",rx:"1",transform:"rotate(45 7.41422 6)",fill:"black"})]})})]}),l(d.Body,{children:[l(n.Group,{as:b,className:"mb-3",children:[a(n.Label,{column:!0,lg:"3",className:"required",children:"Name"}),l(N,{lg:"9",className:"fv-row",children:[a(n.Control,{type:"text",name:"name",defaultValue:i.name,onChange:g,isInvalid:!!(t!=null&&t.name),className:"form-control-solid",placeholder:"Todo-name"}),a(n.Control.Feedback,{type:"invalid",children:(w=t==null?void 0:t.name)==null?void 0:w.message})]})]}),l(n.Group,{as:b,className:"mb-3",children:[a(n.Label,{column:!0,lg:"3",className:"required",children:"Url"}),l(N,{lg:"9",className:"fv-row",children:[a(n.Control,{type:"text",name:"url",defaultValue:i.url,onChange:g,isInvalid:!!(t!=null&&t.url),className:"form-control-solid",placeholder:"url"}),a(n.Control.Feedback,{type:"invalid",children:(k=t==null?void 0:t.url)==null?void 0:k.message})]})]}),l(n.Group,{as:b,className:"mb-3",children:[a(n.Label,{column:!0,lg:"3",className:"required",children:"Icon"}),l(N,{lg:"9",className:"fv-row",children:[a(n.Control,{type:"text",name:"icon",defaultValue:i.icon,onChange:g,isInvalid:!!(t!=null&&t.icon),className:"form-control-solid",placeholder:"icon"}),a(n.Control.Feedback,{type:"invalid",children:(_=t==null?void 0:t.icon)==null?void 0:_.message})]})]})]}),a(d.Footer,{children:a("button",{className:"btn btn-primary",onClick:L,children:i._id?"Update":"Save"})})]})]})]})}export{G as default};
