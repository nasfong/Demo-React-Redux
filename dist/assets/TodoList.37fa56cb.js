import{g as j,r as m,b as h,j as t,k as z,a,h as i,i as _,C as S}from"./index.65bb9303.js";import{T as H,P as T,M as r}from"./Toolbar.f8df97e7.js";function A(){var w,k;const{pathname:C}=j(),f={name:"",isCompleted:!1},[s,b]=m.exports.useState(f),[d,c]=m.exports.useState([]),[l,p]=m.exports.useState(),[F,N]=m.exports.useState(!1),v=()=>{N(!0)},u=()=>{N(!1),b(f),p()};m.exports.useEffect(()=>{h.get("/todo").then(e=>c(e.data.data)).catch(e=>console.log(e.message))},[]);const x=e=>{p();const{value:n,name:o}=e.target;b({...s,[o]:n})},L=async({_id:e,name:n,isCompleted:o})=>{await h.put(`/todo/${e}`,{name:n,isCompleted:!o}).then(g=>{g.status===200&&c(d.map(y=>y._id===e?g.data.data:y))}).catch(g=>console.log(g))},I=async e=>{await h.delete(`/todo/${e}`).then(n=>{n.status===200&&c(d.filter(o=>o._id!==e))}).catch(n=>console.log(n))},M=async()=>{s._id&&await h.put(`/todo/${s._id}`,s).then(e=>{console.log(e.data),e.status===200?(c(d.map(n=>n._id===s._id?e.data.data:n)),u()):e.status===201&&p(e.data.data)}).catch(e=>console.log(e)),await h.post("/todo",s).then(e=>{e.status===200?(c(d.concat(e.data.data)),u()):e.status===201&&p(e.data.data)}).catch(e=>console.log(e.message))};return t(z,{children:[t(H,{children:[a("div",{className:"text-capitalize float-start",children:T(C)}),a("div",{className:"float-end",children:a("button",{onClick:v,className:"btn btn-primary btn-sm",children:"Add"})})]}),t("div",{className:"card",children:[t("table",{className:"table",children:[a("thead",{className:"text-muted",children:t("tr",{children:[a("th",{children:"n#"}),a("th",{children:"No"}),a("th",{children:"Todo"}),a("th",{children:"Is Complete"}),a("th",{className:"text-end",children:"Action"})]})}),a("tbody",{className:"text-muted",children:d.map((e,n)=>t("tr",{children:[a("td",{children:t("div",{className:"popup",children:[a("span",{children:"Hover"}),t("div",{className:"popup-content",children:[a("div",{"data-link-hover":"true",onClick:()=>{b({...s,_id:e._id,name:e.name,isCompleted:e.isCompleted}),v()},children:"edit"}),a("div",{"data-link-hover":"true",onClick:()=>I(e._id),children:"delete"})]})]})}),a("td",{children:n+1}),a("td",{children:e.name}),a("td",{children:e.isCompleted?a("span",{className:"badge badge-light-success transition",children:"Completed"}):a("span",{className:"badge badge-light-danger transition",children:"Not complete"})}),a("td",{className:"text-end",children:a("button",{className:"btn btn-secondary btn-sm me-1",onClick:()=>L({_id:e._id,name:e.name,isCompleted:e.isCompleted}),children:e.isCompleted?"Not Yet":"Done"})})]},e._id))})]}),t(r,{show:F,onHide:u,size:"lg",children:[t(r.Header,{children:[a(r.Title,{className:"text-capitalize",children:T(C)}),a("div",{className:"btn btn-icon btn-sm btn-light-primary text-primary",onClick:u,children:t("svg",{width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a("rect",{id:"time-3-icon",opacity:"0.5",x:"6",y:"17.3137",width:"16",height:"2",rx:"1",transform:"rotate(-45 6 17.3137)",fill:"black"}),a("rect",{id:"time-3-icon",x:"7.41422",y:"6",width:"16",height:"2",rx:"1",transform:"rotate(45 7.41422 6)",fill:"black"})]})})]}),t(r.Body,{children:[t(i.Group,{as:_,className:"mb-3",children:[a(i.Label,{column:!0,lg:"3",className:"required",children:"Name"}),t(S,{lg:"9",className:"fv-row",children:[a(i.Control,{type:"text",name:"name",defaultValue:s.name,onChange:x,isInvalid:!!(l!=null&&l.name),className:"form-control-solid",placeholder:"Todo-name"}),a(i.Control.Feedback,{type:"invalid",children:(w=l==null?void 0:l.name)==null?void 0:w.message})]})]}),t(i.Group,{as:_,className:"mb-3",children:[a(i.Label,{column:!0,lg:"3",className:"required"}),t(S,{lg:"9",className:"fv-row",children:[a(i.Check,{type:"switch",id:"custom-switch",name:"isCompleted",checked:!!s.isCompleted,onChange:e=>{x({target:{name:e.target.name,value:e.target.checked}})},isInvalid:!!(l!=null&&l.isCompleted),className:"form-control-solid",placeholder:"image-name",label:"Check this switch"}),a(i.Control.Feedback,{type:"invalid",children:(k=l==null?void 0:l.isCompleted)==null?void 0:k.message})]})]})]}),a(r.Footer,{children:a("button",{className:"btn btn-primary",onClick:M,children:s._id?"Update":"Save"})})]})]})]})}export{A as default};
